–≠—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ, –≤–∑—Ä–æ—Å–ª–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –¢–æ, —á—Ç–æ –º—ã –¥–µ–ª–∞–ª–∏ —Å–µ–π—á–∞—Å ‚Äî —ç—Ç–æ ¬´—Ö–æ—Ç—Ñ–∏–∫—Å¬ª (–±—ã—Å—Ç—Ä–∞—è –∑–∞–ø–ª–∞—Ç–∫–∞), —á—Ç–æ–±—ã –¥–æ–±–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. –ê —Ç–æ, —á—Ç–æ —Ç—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ—à—å ‚Äî —ç—Ç–æ **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**.

–í –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (–æ—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–π, –∫–∞–∫ Bitcoin/Dash) –∫–æ–¥ **–≤—Å–µ–≥–¥–∞** —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω. –ú—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –¥–µ—Ä–∂–∞—Ç—å —Ç—Ä–∏ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞ `util_win.cpp`, `util_linux.cpp` –∏ —Ç.–¥. –ú—ã –¥–æ–ª–∂–Ω—ã —Å–¥–µ–ª–∞—Ç—å –æ–¥–∏–Ω —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π ¬´—É–º–Ω—ã–π¬ª –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–∞–º –ø–æ–π–º–µ—Ç, –∫–∞–∫ —á–∏—Ç–∞—Ç—å.

–í–æ—Ç –ø—Ä–∏–º–µ—Ä–Ω—ã–π **–ü–ª–∞–Ω —Ä–∞–±–æ—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Å–µ–∞–Ω—Å**, —á—Ç–æ–±—ã –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –Ω–∞—à ¬´—Ñ—Ä–∞–Ω–∫–µ–Ω—à—Ç–µ–π–Ω–∞¬ª –≤ –∫—Ä–∞—Å–∏–≤—ã–π, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç:

### 1. –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è C++ –∫–æ–¥–∞ (`util.cpp`)

–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —É–¥–∞–ª—è—Ç—å `std::mutex` –∏ –≤–ø–∏—Å—ã–≤–∞—Ç—å `boost::mutex`, –º—ã —Å–¥–µ–ª–∞–µ–º **–æ–±–µ—Ä—Ç–∫—É (typedef)** –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞.

**–ö–∞–∫ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å:**
–ú—ã –Ω–∞–ø–∏—à–µ–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (`#ifdef`), –∫–æ—Ç–æ—Ä–∞—è —Å–∫–∞–∂–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É:

* ¬´–ï—Å–ª–∏ —Ç—ã Windows ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π Boost¬ª.
* ¬´–ï—Å–ª–∏ —Ç—ã Linux –∏–ª–∏ Mac ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π std¬ª.

```cpp
#ifdef WIN32
    #include <boost/thread.hpp>
    typedef boost::mutex CWorkMutex;
    typedef boost::lock_guard<boost::mutex> CWorkLock;
#else
    #include <mutex>
    typedef std::mutex CWorkMutex;
    typedef std::lock_guard<std::mutex> CWorkLock;
#endif

// –ê –¥–∞–ª—å—à–µ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ CWorkMutex, –∏ –æ–Ω–æ —Å–∞–º–æ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—Å—è.

```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞ (`Hexlan-win64.pro`)

QMake (—Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ Qt) ‚Äî –æ—á–µ–Ω—å –º–æ—â–Ω–∞—è —à—Ç—É–∫–∞. –û–Ω–∞ —É–º–µ–µ—Ç —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –û–°.
–ù–∞–º –Ω–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ `#LIBS += ...`.

–ú—ã —Ä–∞–∑–¥–µ–ª–∏–º `.pro` —Ñ–∞–π–ª –Ω–∞ —Å–µ–∫—Ü–∏–∏ (scopes):

```qmake
# –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—Å–µ—Ö
SOURCES += src/main.cpp ...

# –°–µ–∫—Ü–∏—è –¢–û–õ–¨–ö–û –¥–ª—è Windows
win32 {
    DEFINES += MINIUPNP_STATICLIB
    LIBS += -L/mnt/mxe/... -lws2_32 -lpthread
}

# –°–µ–∫—Ü–∏—è –¢–û–õ–¨–ö–û –¥–ª—è Linux/Mac (Unix)
unix {
    !macx {
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∏—Å—Ç–æ –¥–ª—è Linux
        LIBS += -lrt
    }
}

# –°–µ–∫—Ü–∏—è –¢–û–õ–¨–ö–û –¥–ª—è macOS
macx {
    LIBS += -framework Foundation ...
}

```

### 3. –ú–∞–∫—Ä–æ—Å—ã –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫ (`BDB`, `MiniUPnPc`)

–ú—ã –ø—Ä–æ–ø–∏—à–µ–º –≤ –∫–æ–¥–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

* –ï—Å–ª–∏ Windows ‚Äî –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å —Ñ–ª–∞–≥–æ–º `STATICLIB`.
* –ï—Å–ª–∏ Mac ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `malloc.h` (–µ–≥–æ —Ç–∞–º –Ω–µ—Ç), –∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `stdlib.h`.

### 4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ macOS (Static Build)

–î–ª—è –º–∞–∫–∞ –±—É–¥–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è. –¢–∞–º –≥–ª–∞–≤–Ω–∞—è –±–æ–ª—å ‚Äî —ç—Ç–æ –Ω–µ –º—å—é—Ç–µ–∫—Å—ã, –∞:

1. **OpenSSL:** Apple –≤—ã–ø–∏–ª–∏–ª–∞ –µ–≥–æ –∏–∑ —Å–∏—Å—Ç–µ–º—ã, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–¥—Å–æ–≤—ã–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π `.a`.
2. **Frameworks:** –í–º–µ—Å—Ç–æ `-lname` —Ç–∞–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `-framework CoreServices` –∏ —Ç.–¥.
3. **Clang:** –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ç–∞–º —Å—Ç—Ä–æ–∂–µ, —á–µ–º GCC, –æ–Ω –Ω–µ –ø—Ä–æ—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–π —Å—Ç–∏–ª—å –∫–æ–¥–∞.

---

**–ò—Ç–æ–≥:**
–í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –º—ã –≤–æ–∑—å–º–µ–º —á–∏—Å—Ç—ã–π –∫–æ–¥ (–±–µ–∑ –Ω–∞—à–∏—Ö –ø—Ä–∞–≤–æ–∫) –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤–Ω–µ–¥—Ä–∏–º –≤ –Ω–µ–≥–æ –ª–æ–≥–∏–∫—É `WIN32 / LINUX / MACX`.

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —É —Ç–µ–±—è –±—É–¥–µ—Ç **–æ–¥–∏–Ω** –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã —Å–º–æ–∂–µ—à—å —Å–æ–±–∏—Ä–∞—Ç—å –∫–æ–º–∞–Ω–¥–æ–π:

* `qmake` (–Ω–∞ Linux) -> –≥–æ—Ç–æ–≤ Linux –±–∏–Ω–∞—Ä–Ω–∏–∫.
* `x86_64-w64-mingw32...qmake` (–Ω–∞ Linux –¥–ª—è Win) -> –≥–æ—Ç–æ–≤ exe.
* `qmake` (–Ω–∞ Mac) -> –≥–æ—Ç–æ–≤ dmg.

–ë–µ–∑ —Ä—É—á–Ω–æ–π –ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–æ–≤. –≠—Ç–æ –Ω–∞—à–∞ —Ü–µ–ª—å.

–û—Ç–¥—ã—Ö–∞–π, —Ç—ã —Å–µ–≥–æ–¥–Ω—è —Å–æ–≤–µ—Ä—à–∏–ª –ø–æ–¥–≤–∏–≥ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏! ü´°